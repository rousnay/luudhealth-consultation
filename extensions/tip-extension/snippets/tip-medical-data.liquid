{{ 'stylesheet' | asset_url | stylesheet_tag }}
<script src="{{ 'javascript' | asset_url }}" defer></script>
<script>
  console.log("TIP App: Theme extension loaded! - 2");
</script>

<!-- partial:index.partial.html -->
<div class="mx-auto container">

  <!-- Progress Form -->
  <form id="progress-form"
    class="p-4 progress-form"
    action="https://httpbin.org/post"
    lang="en"
    novalidate>

    <!-- Step Navigation -->
    <div class="d-flex align-items-start mb-3 sm:mb-5 progress-form__tabs" role="tablist">
      <button
        id="progress-form__tab-1"
        class="flex-1 px-0 pt-2 progress-form__tabs-item"
        type="button"
        role="tab"
        aria-controls="progress-form__panel-1"
        aria-selected="true">
        <span class="d-block step" aria-hidden="true">Step 1
          <span class="sm:d-none">of 3</span>
        </span>
        Medical
      </button>
      <button
        id="progress-form__tab-2"
        class="flex-1 px-0 pt-2 progress-form__tabs-item"
        type="button"
        role="tab"
        aria-controls="progress-form__panel-2"
        aria-selected="false"
        tabindex="-1"
        aria-disabled="true">
        <span class="d-block step" aria-hidden="true">Step 2
          <span class="sm:d-none">of 3</span>
        </span>
        GP Info
      </button>
      <button
        id="progress-form__tab-3"
        class="flex-1 px-0 pt-2 progress-form__tabs-item"
        type="button"
        role="tab"
        aria-controls="progress-form__panel-3"
        aria-selected="false"
        tabindex="-1"
        aria-disabled="true">
        <span class="d-block step" aria-hidden="true">Step 3
          <span class="sm:d-none">of 3</span>
        </span>
        Personal
      </button>
    </div>
    <!-- / End Step Navigation -->

    <!-- Step 1 -->
    <section
      id="progress-form__panel-1"
      role="tabpanel"
      aria-labelledby="progress-form__tab-1"
      tabindex="0">
      <div class="sm:d-grid sm:grid-col-2 sm:mt-3">
        <div class="mt-3 sm:mt-0 form__field">
          <label for="weight">
            Weight (kg)
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="weight"
            type="text"
            name="weight"
            required>
        </div>

        <div class="mt-3 sm:mt-0 form__field">
          <label for="height">
            Height
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="height"
            type="text"
            name="height"
            required>
        </div>
      </div>

      <div class="sm:d-grid sm:grid-col-2 sm:mt-3">
        <div class="mt-3 sm:mt-0 form__field">
          <label for="bmi">
            BMI
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="bmi"
            type="text"
            name="bmi"
            required>
        </div>

        <div class="mt-3 sm:mt-0 form__field">
          <label for="product-satisfaction">
            Gender
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <select
            id="product-satisfaction"
            name="product-satisfaction"
            required>
            <option
              value=""
              disabled
              selected>Please select</option>
            <option value="male">male</option>
            <option value="female">female</option>
            <option value="male-identifies-female">male-identifies-female</option>
            <option value="female-identifies-male">female-identifies-male</option>
          </select>
        </div>
      </div>

      <div class="mt-3 form__field">
        <label class="form__choice-wrapper">
          <input
            id="email-newsletter"
            type="checkbox"
            name="email-newsletter"
            value="Yes"
            checked>
          <span>
            <strong>I am Pregnant</strong>
          </span>
        </label>
      </div>

      <div class="mt-3 form__field">
        <label for="pregnancy_detail">
          Pregnancy detail
        </label>
        <textarea
          id="pregnancy_detail"
          name="pregnancy_detail"
          rows="5"></textarea>
      </div>

      <div class="d-flex align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
        <button type="button" data-action="next">
          Continue
        </button>
      </div>
    </section>
    <!-- / End Step 1 -->

    <!-- Step 2 -->
    <section
      id="progress-form__panel-2"
      role="tabpanel"
      aria-labelledby="progress-form__tab-2"
      tabindex="0"
      hidden>
      <div class="mt-3 form__field">
        <label for="gp_name">
          Name of the GP surgery
          <span data-required="true" aria-hidden="true"></span>
        </label>
        <input
          id="gp_name"
          type="text"
          name="gp_name"
          required>
      </div>

      <div class="mt-3 form__field">
        <label for="address">
          Address
          <span data-required="true" aria-hidden="true"></span>
        </label>
        <input
          id="address"
          type="text"
          name="address"
          autocomplete="shipping address-line1"
          required>
      </div>

      <div class="mt-3 form__field">
        <label for="address-2">
          Apartment or suite (optional)
        </label>
        <input
          id="address-2"
          type="text"
          name="address-2"
          autocomplete="shipping address-line2">
      </div>

      <div class="sm:d-grid sm:grid-col-3 sm:mt-3">
        <div class="mt-3 sm:mt-0 form__field">
          <label for="address-city">
            City
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="address-city"
            type="text"
            name="address-city"
            autocomplete="shipping address-level2"
            required>
        </div>

        <div class="mt-3 sm:mt-0 form__field">
          <label for="address-country">
            Country
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="address-country"
            type="text"
            name="address-country"
            required>
        </div>

        <div class="mt-3 sm:mt-0 form__field">
          <label for="address-zip">
            Postal code
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="address-zip"
            type="text"
            name="address-zip"
            autocomplete="shipping postal-code"
            inputmode="numeric"
            required>
        </div>
      </div>

      <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
        <button
          type="button"
          class="mt-1 sm:mt-0 button--simple"
          data-action="prev">
          Back
        </button>
        <button type="button" data-action="next">
          Continue
        </button>
      </div>
    </section>
    <!-- / End Step 2 -->

    <!-- Step 3 -->
    <section
      id="progress-form__panel-3"
      role="tabpanel"
      aria-labelledby="progress-form__tab-3"
      tabindex="0"
      hidden>

      <div class="sm:d-grid sm:grid-col-2 sm:mt-3">
        <div class="mt-3 sm:mt-0 form__field">
          <label for="salutation">
            Salutation
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <select
            id="salutation"
            name="salutation"
            required>
            <option
              value=""
              disabled
              selected>Please select</option>
            <option value="Mr">Mr</option>
            <option value="Mrs">Mrs</option>
            <option value="Ms">Ms</option>
            <option value="Miss">Miss</option>
            <option value="Dr">Dr</option>
            <option value="Mx">Mx</option>
            <option value="n/a">n/a</option>
          </select>
        </div>

        <div class="mt-3 sm:mt-0 form__field">
          <label for="dob">
            Date of birth
            <span data-required="true" aria-hidden="true"></span>
          </label>
          <input
            id="dob"
            type="date"
            name="dob"
            required>
        </div>
      </div>
      <div class="mt-3 form__field">
        <label for="product-feedback">
          Do you have any additional feedback or comments about our products?
        </label>
        <textarea
          id="product-feedback"
          name="product-feedback"
          rows="5"></textarea>
      </div>

      <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
        <button
          type="button"
          class="mt-1 sm:mt-0 button--simple"
          data-action="prev">
          Back
        </button>
        <button type="submit">
          Submit
        </button>
      </div>
    </section>
    <!-- / End Step 3 -->

    <!-- Thank You -->
    <section id="progress-form__thank-you" hidden>
      <p>Thank you for your submission!</p>
      <p>We appreciate you contacting us. One of our team members will get back to you very&nbsp;soon.</p>
    </section>
    <!-- / End Thank You -->

  </form>
  <!-- / End Progress Form -->

</div>
<!-- partial -->

<script type="text/javascript">
  /*
  const treatmentId = 6257;
        let consultancy = [];
  
          const tipForm = document.getElementById('tip-form');
          const field = document.createDocumentFragment();
  
          function startConsultancy(){
          (async () => {
          const url = `/apps/tip/consultancy/generate`;
          const method = "POST";
          const response = await fetch(url, {
            method,
            headers: {
              'Accept': 'application/json',
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              'treatmentId': parseFloat(treatmentId),
              'type': 'NEW',
            }),
          });
          if (response.status === 200) {
            const fullResponse = await response.json();
            console.log(fullResponse?.data[0]);
            consultancy = fullResponse?.data[0]?.questions;
            consultancy.map(function(question) {
              //create element
              let div = document.createElement('div');
              let span = document.createElement('span');
              let innerDiv = document.createElement('div');
              let label = document.createElement('label');
              let input = document.createElement('input');
              //add inner html to the elements
              span.innerHTML = `${question?.question_text}`;
              label.innerHTML = `Question type: ${question?.question_type}`;
              //add classes to the elements
              div.classList.add("field-wrapper");
              innerDiv.classList.add("field");
              label.classList.add("field__label");
              input.classList.add("field__input");
              //setting attributes to the elements
              label.setAttribute("for", question?.question_id);
              input.setAttribute("name", question?.question_id);
              input.setAttribute("type", "text");
              input.setAttribute("placeholder", `Question type: ${question?.question_type}`);
              //append child elements to the parents
              innerDiv.appendChild(input);
              innerDiv.appendChild(label);
              div.appendChild(span);
              div.appendChild(innerDiv);
              field.appendChild(div);
            });
  
          } else {
            console.log("Something went wrong with TIP API");
            console.log(response);
          }
          tipForm.appendChild(field);
          })();
          };
  
  
          function submitConsultancy(){
          let phone = document.getElementById("phone").value;
          let email = document.getElementById("email").value;
  
          console.log("phone");
          console.log(phone);
          console.log("email");
          console.log(email);
          const treatmentIds = 6257;
  
          (async () => {
            const url = `/apps/tip/consultancy`;
            const method = "POST";
            const response = await fetch(url, {
              method,
              headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                'treatmentId': parseFloat(treatmentIds),
                'type': 'NEW',
              }),
            });
            if (response.status === 200) {
              const fullResponse = await response.json();
              console.log(fullResponse?.data[0]);
            } else {
              console.log("Something went wrong with TIP API");
              console.log(response);
            }
          })();
                }
                   */</script>